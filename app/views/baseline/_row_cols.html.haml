-# frozen_string_literal: true
-# locals: (cols: { sm: 2, lg: 3, xl: 4 }, gutter: { nil => 3, md: 4 }, elements: nil, css_class: nil, id: nil, data: nil)

- if css_class&.if(Array) { _1.join(" ") }&.match?(/\bm[ty]?-/)
  - ReportError.call "Don't set a top margin on row cols, it messes up the negative top margin that is added by Bootstrap to offset the gutter."

- gutter = { nil => gutter } if gutter.is_a?(Integer)

- unless elements&.none?
  .row.row-cols-1{ class: [css_class, *gutter.map { ["g", _1, _2].compact.join('-') }, *cols&.map { ["row-cols", _1, _2].join("-") }].compact, id:, data: }
    - if elements
      - elements.each_with_index do |element, index|
        .col
          -# Yielding a symbol is not possible, it would be equivalent to `content_for(symbol)`
          = yield element.if(Symbol, &:to_s), index
    - else
      = yield
